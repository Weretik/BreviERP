@using Application.Reference.GetAllFabric
@rendermode InteractiveServer

<MudTable T="FabricRowDTO" Items="@_rowDtos" Hover="true" Editable="true" OnSave="SaveAsync">
    <HeaderContent>
        <MudTh>№</MudTh>
        <MudTh>Назва</MudTh>
        <MudTh>Виробник</MudTh>
        <MudTh>Ціна</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="№">@context.Id</MudTd>
        <MudTd DataLabel="Назва">@context.Name</MudTd>
        <MudTd DataLabel="Виробник">@context.CounterpartyName</MudTd>
        <MudTd DataLabel="Ціна">@context.Price</MudTd>
    </RowTemplate>

</MudTable>

@code {
    private List<FabricRowDTO> _rowDtos = new();

    protected override async Task OnInitializedAsync()
    {
        var result = await Mediator.Send(new GetAllFabricQuery());

        if (result.IsSuccess)
            _rowDtos = result.Value!;
    }

    private Task SaveAsync()
    {
        return Task.CompletedTask;
    }
}
