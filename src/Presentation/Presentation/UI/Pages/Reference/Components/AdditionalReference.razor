@using Application.Reference.GetAdditionalReference
@rendermode InteractiveServer

<MudTable T="AdditionalReferenceRowDTO" Items="@_rowDtos" Hover="true" Editable="true" OnSave="SaveAsync">
    <ColGroup>
        <col style="width: 30px;" />
        <col/>
        <col/>
        <col style="width: 30px;"/>
        <col style="width: 40%;"/>
    </ColGroup>
    <HeaderContent>
        <MudTh>№</MudTh>
        <MudTh>Параметр</MudTh>
        <MudTh>Значення</MudTh>
        <MudTh>Од.</MudTh>
        <MudTh>Коментар</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="№">@context.Id</MudTd>
        <MudTd DataLabel="Параметр">@context.Name</MudTd>
        <MudTd DataLabel="Значення">@context.Value</MudTd>
        <MudTd DataLabel="Од.">@context.Unit</MudTd>
        <MudTd DataLabel="Коментар">@context.Description</MudTd>
    </RowTemplate>

</MudTable>

@code
{
    private List<AdditionalReferenceRowDTO> _rowDtos = new();

    protected override async Task OnInitializedAsync()
    {
        var result = await Mediator.Send(new GetAdditionalReferenceQuery());

        if (result.IsSuccess)
            _rowDtos = result.Value!;
    }

    private Task SaveAsync()
    {
        return Task.CompletedTask;
    }
}
